---
layout:     post
title:    说说C里的多维数组
subtitle:   好玩的多维数组
date:       2019-03-15
author:     mengxun
header-img: img/post-bg-desk.jpg
catalog: true
tags:
    - 基础
---

#### 先看一段代码


	1 #include <stdio.h>
	2
	3 int main(void)
	4 {
	5     int x[2][2] = {{1, 2}, {3, 4}};
	6
	7     printf("x[0] = %p, x = %p, &x = %p\n", x[0], x, &x);
	8     printf("x[0] + 1 = %p, x + 1 = %p, &x + 1 = %p\n", x[0] + 1, x + 1, &x + 1 );
	9
	10     return 0;
	11 }



#### 输出

这段代码的输出在我的Mac上输出如下：

```
x[0] = 0x7ffeecd3ca30, x = 0x7ffeecd3ca30, &x = 0x7ffeecd3ca30
x[0] + 1 = 0x7ffeecd3ca34, x + 1 = 0x7ffeecd3ca38, &x + 1 = 0x7ffeecd3ca40
```

#### 解释

第一行的的三个值都是数组第一个字节的地址，所以三个值都一样，这个没什么问题（&x的值是整个数组的地址，可以把它看作一个指向整个数组的指针，但是&x并不是指针）

第二行之所以出现三个值不一样，是因为：

- x[0] 的值是整数1的地址，x[0] + 1 就等于地址加上int的长度
- x 的值是一个含有两个整数的数组的地址，x + 1 就等于地址加上数组（含有两个整数）的长度
- &x 的值是一个含有两个数组的数组的地址, &x + 1就等于地址加上数组 （含有两个数组）的长度

另外虽然数组名和指针看起来很像，但是数组名和指针是两回事，他们的区别主要在于：

- 数组名等于数组首元素的地址，是一个`常量`
- 指针是个存储地址的`变量`
- 指针前加 & 等于指针的地址，数组名前面加 & 等于整个数组的地址
- sizeof 后面加指针等于指针的长度，但是后面加数组名等于数组的长度
